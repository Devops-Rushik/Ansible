# This playbook is used for taking, deleting and reverting snapshots from vcenter 
# This playbook uses snapshot.sh file 
# We need to pass vcenter name, username, server name and how much RAM should server contains while running this playbook

---
- hosts: localhost
  gather_facts: false

  tasks:
  - name:  snapshot
    vmware_guest_snapshot:
      name: "{{ hname }}"
      hostname: "{{ vcenter_name }}"
      username: "{{ user_name }}"
      password: "{{ pass }}"        # From vault as defined
      validate_certs: no
      datacenter: "{{ vcenter_name }}"
      folder: /
      state: "{{ status }}"
      snapshot_name: "{{ snap_name }}"
    delegate_to: localhost
